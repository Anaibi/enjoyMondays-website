(function(a){a(document).ready(function(){a("body").append('<div id="supersized-loader"></div><ul id="supersized"></ul>')});a.supersized=function(b){var c="#supersized",d=this;d.$el=a(c);d.el=c;vars=a.supersized.vars;d.$el.data("supersized",d);api=d.$el.data("supersized");a.supersized.api=api;d.init=function(){console.log("-INITIALIZING!");a.supersized.vars=a.extend(a.supersized.vars,a.supersized.themeVars);a.supersized.vars.options=a.extend({},a.supersized.defaultOptions,a.supersized.themeOptions,b);d.options=a.supersized.vars.options;if(!a.isArray(d.options.slides[0])){console.log("--WE NEED TO MAKE MAGIC NOW!");d.options.slides=[d.options.slides]}d._build()};d._reset=function(){clearInterval(vars.slideshow_interval);a(d.el+" li").remove();a(vars.thumb_list).remove()};d._build=function(){console.log("-BASE BUILD!");var b=0,c="",e="",f,g="",h;while(b<=d.totalSlides()-1){switch(d.options.slide_links){case"num":f=b;break;case"name":f=d.getSlide(b).title;break;case"blank":f="";break}c=c+'<li class="slide-'+b+'"></li>';var i=["thumb"+b];var j=["slide-link-"+b];if(b==d.options.start_slide-1){if(d.options.slide_links)j.push("current-slide");if(d.options.thumb_links)i.push("current-thumb")}if(d.options.slide_links)e=e+'<li class="'+j.join(" ")+'" ><a>'+f+"</a></li>";if(d.options.thumb_links){d.getSlide(b).thumb?h=d.getSlide(b).thumb:h=d.getSlide(b).image;g=g+'<li class="'+i.join(" ")+'"><img src="'+h+'"/></li>'}b++}if(d.options.slide_links)a(vars.slide_list).html(e);if(d.options.thumb_links&&vars.thumb_tray.length){a(vars.thumb_tray).append('<ul id="'+vars.thumb_list.replace("#","")+'">'+g+"</ul>")}a(d.el).append(c);if(d.options.thumbnail_navigation){vars.current_slide-1<0?prevThumb=d.totalSlides()-1:prevThumb=vars.current_slide-1;a(vars.prev_thumb).show().html(a("<img/>").attr("src",d.getSlide(prevThumb).image));vars.current_slide==d.totalSlides()-1?nextThumb=0:nextThumb=vars.current_slide+1;a(vars.next_thumb).show().html(a("<img/>").attr("src",d.getSlide(nextThumb).image))}d._start()};d._start=function(){console.log("-BASE START!");if(d.options.start_slide)vars.current_slide=d.options.start_slide-1;else vars.current_slide=Math.floor(Math.random()*d.totalSlides());var b=d.options.new_window?' target="_blank"':"";if(d.options.performance==3){d.$el.addClass("speed")}else if(d.options.performance==1||d.options.performance==2){d.$el.addClass("quality")}if(d.options.random){arr=d.options.slides;for(var c,e,f=arr.length;f;c=parseInt(Math.random()*f),e=arr[--f],arr[f]=arr[c],arr[c]=e);d.options.slides=arr}if(d.totalSlides()>1){if(d.totalSlides()>2){vars.current_slide-1<0?loadPrev=d.totalSlides()-1:loadPrev=vars.current_slide-1;var g=d.getSlide(loadPrev).url?"href='"+d.getSlide(loadPrev).url+"'":"";var h=a('<img src="'+d.getSlide(loadPrev).image+'"/>');var i=d.el+" li:eq("+loadPrev+")";h.appendTo(i).wrap("<a "+g+b+"></a>").parent().parent().addClass("image-loading prevslide");h.load(function(){a(this).data("origWidth",a(this).width()).data("origHeight",a(this).height());d.resizeNow()})}}else{d.options.slideshow=0}g=api.getField("url")?"href='"+api.getField("url")+"'":"";var j=a('<img src="'+api.getField("image")+'"/>');var k=d.el+" li:eq("+vars.current_slide+")";j.appendTo(k).wrap("<a "+g+b+"></a>").parent().parent().addClass("image-loading activeslide");j.load(function(){console.log("--IMAGE LOADED!");d._origDim(a(this));d.resizeNow();d.launch();if(typeof theme!="undefined"&&typeof theme._init=="function")theme._init()});if(d.totalSlides()>1){vars.current_slide==d.totalSlides()-1?loadNext=0:loadNext=vars.current_slide+1;g=d.getSlide(loadNext).url?"href='"+d.getSlide(loadNext).url+"'":"";var l=a('<img src="'+d.getSlide(loadNext).image+'"/>');var m=d.el+" li:eq("+loadNext+")";l.appendTo(m).wrap("<a "+g+b+"></a>").parent().parent().addClass("image-loading");l.load(function(){a(this).data("origWidth",a(this).width()).data("origHeight",a(this).height());d.resizeNow()})}d.$el.css("visibility","hidden");a(".load-item").hide()};d.launch=function(){console.log("LAUNCHING SUPERSIZED!");d.$el.css("visibility","visible");a("#supersized-loader").remove();if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function")theme.beforeAnimation("next");a(".load-item").show();d.$el.trigger("supersizedLaunchEvent");if(d.options.keyboard_nav){a(document.documentElement).keyup(function(a){if(vars.in_animation)return false;if(a.keyCode==37||a.keyCode==40){clearInterval(vars.slideshow_interval);d.prevSlide()}else if(a.keyCode==39||a.keyCode==38){clearInterval(vars.slideshow_interval);d.nextSlide()}else if(a.keyCode==32&&!vars.hover_pause){clearInterval(vars.slideshow_interval);d.playToggle()}})}if(d.options.slideshow&&d.options.pause_hover){a(d.el).hover(function(){if(vars.in_animation)return false;vars.hover_pause=true;if(!vars.is_paused){vars.hover_pause="resume";d.playToggle()}},function(){if(vars.hover_pause=="resume"){d.playToggle();vars.hover_pause=false}})}if(d.options.slide_links){a(vars.slide_list+"> li").click(function(){index=a(vars.slide_list+"> li").index(this);targetSlide=index+1;d.goTo(targetSlide);return false})}if(d.options.thumb_links){a(vars.thumb_list+"> li").click(function(){index=a(vars.thumb_list+"> li").index(this);targetSlide=index+1;api.goTo(targetSlide);return false})}if(d.options.slideshow&&d.totalSlides()>1){if(d.options.autoplay&&d.totalSlides()>1){vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)}else{vars.is_paused=true}a(".load-item img").bind("contextmenu mousedown",function(){return false})}a(window).resize(function(){d.resizeNow()})};d.resizeNow=function(){return d.$el.each(function(){a("img",d.el).each(function(){function h(a){if(a){if(thisSlide.height()<e){if(thisSlide.height()/b>=d.options.min_width){thisSlide.height(d.options.min_height);thisSlide.width(thisSlide.height()/b)}else{g(true)}}}else{if(d.options.min_width>=c){if(e/b>=d.options.min_width||b>1){thisSlide.height(e);thisSlide.width(e/b)}else if(b<=1){thisSlide.width(d.options.min_width);thisSlide.height(thisSlide.width()*b)}}else{thisSlide.height(e);thisSlide.width(e/b)}}}function g(a){if(a){if(thisSlide.width()<c||thisSlide.width()<d.options.min_width){if(thisSlide.width()*b>=d.options.min_height){thisSlide.width(d.options.min_width);thisSlide.height(thisSlide.width()*b)}else{h()}}}else{if(d.options.min_height>=e&&!d.options.fit_landscape){if(c*b>=d.options.min_height||c*b>=d.options.min_height&&b<=1){thisSlide.width(c);thisSlide.height(c*b)}else if(b>1){thisSlide.height(d.options.min_height);thisSlide.width(thisSlide.height()/b)}else if(thisSlide.width()<c){thisSlide.width(c);thisSlide.height(thisSlide.width()*b)}}else{thisSlide.width(c);thisSlide.height(c*b)}}}thisSlide=a(this);var b=(thisSlide.data("origHeight")/thisSlide.data("origWidth")).toFixed(2);var c=d.$el.width(),e=d.$el.height(),f;if(d.options.fit_always){if(e/c>b){g()}else{h()}}else{if(e<=d.options.min_height&&c<=d.options.min_width){if(e/c>b){d.options.fit_landscape&&b<1?g(true):h(true)}else{d.options.fit_portrait&&b>=1?h(true):g(true)}}else if(c<=d.options.min_width){if(e/c>b){d.options.fit_landscape&&b<1?g(true):h()}else{d.options.fit_portrait&&b>=1?h():g(true)}}else if(e<=d.options.min_height){if(e/c>b){d.options.fit_landscape&&b<1?g():h(true)}else{d.options.fit_portrait&&b>=1?h(true):g()}}else{if(e/c>b){d.options.fit_landscape&&b<1?g():h()}else{d.options.fit_portrait&&b>=1?h():g()}}}if(thisSlide.parents("li").hasClass("image-loading")){a(".image-loading").removeClass("image-loading")}if(d.options.horizontal_center){a(this).css("left",(c-a(this).width())/2)}if(d.options.vertical_center){a(this).css("top",(e-a(this).height())/2)}});if(d.options.image_protect){a("img",d.el).bind("contextmenu mousedown",function(){return false})}return false})};d.nextSlide=function(){console.log("NEXT SLIDE!!");if(vars.in_animation||!api.options.slideshow)return false;else vars.in_animation=true;clearInterval(vars.slideshow_interval);var b=d.options.slides,c=d.$el.find(".activeslide");a(".prevslide").removeClass("prevslide");c.removeClass("activeslide").addClass("prevslide");vars.current_slide+1==d.totalSlides()?vars.current_slide=0:vars.current_slide++;var e=a(d.el+" li:eq("+vars.current_slide+")"),f=d.$el.find(".prevslide");if(d.options.performance==1)d.$el.removeClass("quality").addClass("speed");loadSlide=false;vars.current_slide==d.totalSlides()-1?loadSlide=0:loadSlide=vars.current_slide+1;var g=d.el+" li:eq("+loadSlide+")";if(!a(g).html()){var h=d.options.new_window?' target="_blank"':"";imageLink=d.getSlide(loadSlide).url?"href='"+d.getSlide(loadSlide).url+"'":"";var i=a('<img src="'+d.getSlide(loadSlide).image+'"/>');i.appendTo(g).wrap("<a "+imageLink+h+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");i.load(function(){d._origDim(a(this));d.resizeNow()})}if(d.options.thumbnail_navigation==1){vars.current_slide-1<0?prevThumb=d.totalSlides()-1:prevThumb=vars.current_slide-1;a(vars.prev_thumb).html(a("<img/>").attr("src",d.getSlide(prevThumb).image));nextThumb=loadSlide;a(vars.next_thumb).html(a("<img/>").attr("src",d.getSlide(nextThumb).image))}if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function")theme.beforeAnimation("next");if(d.options.slide_links){a(".current-slide").removeClass("current-slide");a(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")}e.css("visibility","hidden").addClass("activeslide");d.$el.trigger("nextSlideEvent",[e,c]);return false};d.prevSlide=function(){if(vars.in_animation||!api.options.slideshow)return false;else vars.in_animation=true;clearInterval(vars.slideshow_interval);var b=d.options.slides,c=d.$el.find(".activeslide");a(".prevslide").removeClass("prevslide");c.removeClass("activeslide").addClass("prevslide");vars.current_slide==0?vars.current_slide=d.totalSlides()-1:vars.current_slide--;var e=a(d.el+" li:eq("+vars.current_slide+")"),f=d.$el.find(".prevslide");if(d.options.performance==1)d.$el.removeClass("quality").addClass("speed");loadSlide=false;vars.current_slide-1<0?loadSlide=d.totalSlides()-1:loadSlide=vars.current_slide-1;var g=d.el+" li:eq("+loadSlide+")";if(!a(g).html()){var h=d.options.new_window?' target="_blank"':"";imageLink=d.getSlide(loadSlide).url?"href='"+d.getSlide(loadSlide).url+"'":"";var i=a('<img src="'+d.getSlide(loadSlide).image+'"/>');i.appendTo(g).wrap("<a "+imageLink+h+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");i.load(function(){d._origDim(a(this));d.resizeNow()})}if(d.options.thumbnail_navigation==1){prevThumb=loadSlide;a(vars.prev_thumb).html(a("<img/>").attr("src",d.getSlide(prevThumb).image));vars.current_slide==d.totalSlides()-1?nextThumb=0:nextThumb=vars.current_slide+1;a(vars.next_thumb).html(a("<img/>").attr("src",d.getSlide(nextThumb).image))}if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function")theme.beforeAnimation("prev");if(d.options.slide_links){a(".current-slide").removeClass("current-slide");a(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")}e.css("visibility","hidden").addClass("activeslide");d.$el.trigger("prevSlideEvent",[e,c]);return false};d.playToggle=function(){console.log("- PLAY TOOGLE");if(vars.in_animation||!api.options.slideshow)return false;console.log("- PLAY TOOGLE: ANIMATION AND SLIDESHOW TRUE OR SLIDESHOW NOT FALSE");if(vars.is_paused){console.log("- PLAY TOOGLE: IS PAUSED");vars.is_paused=false;if(typeof theme!="undefined"&&typeof theme.playToggle=="function")theme.playToggle("play");vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)}else{console.log("- PLAY TOOGLE: IS NOT PAUSED");vars.is_paused=true;if(typeof theme!="undefined"&&typeof theme.playToggle=="function")theme.playToggle("pause");clearInterval(vars.slideshow_interval)}return false};d.goTo=function(b){if(vars.in_animation||!api.options.slideshow)return false;var c=d.totalSlides();if(b<0){b=c}else if(b>c){b=1}b=c-b+1;clearInterval(vars.slideshow_interval);if(typeof theme!="undefined"&&typeof theme.goTo=="function")theme.goTo();if(vars.current_slide==c-b){if(!vars.is_paused){vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval)}return false}if(c-b>vars.current_slide){vars.current_slide=c-b-1;vars.update_images="next";d._placeSlide(vars.update_images)}else if(c-b<vars.current_slide){vars.current_slide=c-b+1;vars.update_images="prev";d._placeSlide(vars.update_images)}if(d.options.slide_links){a(vars.slide_list+"> .current-slide").removeClass("current-slide");a(vars.slide_list+"> li").eq(c-b).addClass("current-slide")}if(d.options.thumb_links){a(vars.thumb_list+"> .current-thumb").removeClass("current-thumb");a(vars.thumb_list+"> li").eq(c-b).addClass("current-thumb")}};d._placeSlide=function(b){var c=d.options.new_window?' target="_blank"':"";loadSlide=false;if(b=="next"){vars.current_slide==d.totalSlides()-1?loadSlide=0:loadSlide=vars.current_slide+1;var e=d.el+" li:eq("+loadSlide+")";if(!a(e).html()){var c=d.options.new_window?' target="_blank"':"";imageLink=d.getSlide(loadSlide).url?"href='"+d.getSlide(loadSlide).url+"'":"";var f=a('<img src="'+d.getSlide(loadSlide).image+'"/>');f.appendTo(e).wrap("<a "+imageLink+c+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");f.load(function(){d._origDim(a(this));d.resizeNow()})}d.nextSlide()}else if(b=="prev"){vars.current_slide-1<0?loadSlide=d.totalSlides()-1:loadSlide=vars.current_slide-1;var e=d.el+" li:eq("+loadSlide+")";if(!a(e).html()){var c=d.options.new_window?' target="_blank"':"";imageLink=d.getSlide(loadSlide).url?"href='"+d.getSlide(loadSlide).url+"'":"";var f=a('<img src="'+d.getSlide(loadSlide).image+'"/>');f.appendTo(e).wrap("<a "+imageLink+c+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");f.load(function(){d._origDim(a(this));d.resizeNow()})}d.prevSlide()}};d._origDim=function(a){a.data("origWidth",a.width()).data("origHeight",a.height())};d.afterAnimation=function(){if(d.options.performance==1){d.$el.removeClass("speed").addClass("quality")}if(vars.update_images){vars.current_slide-1<0?setPrev=d.totalSlides()-1:setPrev=vars.current_slide-1;vars.update_images=false;a(".prevslide").removeClass("prevslide");a(d.el+" li:eq("+setPrev+")").addClass("prevslide")}vars.in_animation=false;if(!vars.is_paused&&d.options.slideshow){vars.slideshow_interval=setInterval(d.nextSlide,d.options.slide_interval);if(d.options.stop_loop&&vars.current_slide==d.totalSlides()-1)d.playToggle()}if(typeof theme!="undefined"&&typeof theme.afterAnimation=="function")theme.afterAnimation();return false};d.getField=function(a){return d.getSlide(vars.current_slide)[a];return d.options.slides[vars.current_slide][a]};d.getSlide=function(a,b){return d.getSlides(b)[a]};d.getSlides=function(a){if(!a)a=vars.current_gallery;return d.options.slides[a]};d.totalSlides=function(){return d.options.slides[vars.current_gallery].length};d.setGallery=function(a){if(!vars.is_paused)d.playToggle();vars.current_gallery=a;d._reset();d._build()};d.init()};a.supersized.vars={thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",slide_list:"#slide-list",current_slide:0,in_animation:false,is_paused:false,hover_pause:false,slideshow_interval:false,update_images:false,options:{},current_gallery:0};a.supersized.defaultOptions={slideshow:1,autoplay:1,start_slide:1,stop_loop:0,random:0,slide_interval:5e3,transition:1,transition_speed:750,new_window:1,pause_hover:0,keyboard_nav:1,performance:1,image_protect:1,fit_always:0,fit_landscape:0,fit_portrait:1,min_width:0,min_height:0,horizontal_center:1,vertical_center:1,slide_links:1,thumb_links:1,thumbnail_navigation:0};a.fn.supersized=function(b){return this.each(function(){new a.supersized(b)})}})(jQuery)